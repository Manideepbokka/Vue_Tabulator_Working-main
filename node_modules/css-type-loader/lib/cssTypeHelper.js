"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
function getCssModuleKeys(content) {
    // get local exports
    const localRegex = /locals\s*=\s*{(?<content>[\s\S]*)}/g;
    const localContent = getGroupedMatches(localRegex, content, 'content').join('\n');
    // get all css keys from content
    const keyRegex = /"(?<key>[^\\"]+)":/g;
    const cssKeys = getGroupedMatches(keyRegex, localContent, 'key');
    return cssKeys.sort();
}
exports.getCssModuleKeys = getCssModuleKeys;
function getGroupedMatches(regex, content, group) {
    const matches = [] = [];
    let match;
    do {
        match = regex.exec(content);
        if (match && match.groups && match.groups[group])
            matches.push(match.groups[group]);
    } while (match != null);
    return matches;
}
function filterNonWordKeys(cssModuleKeys) {
    const allWordsRegexp = /^\w+$/i;
    const filteredClassNames = cssModuleKeys.filter(classname => allWordsRegexp.test(classname));
    return filteredClassNames;
}
exports.filterNonWordKeys = filterNonWordKeys;
;
function getTypingFilename(filename) {
    const dirName = path.dirname(filename);
    const baseName = path.basename(filename);
    return path.join(dirName, `${baseName}.d.ts`);
}
exports.getTypingFilename = getTypingFilename;
;
